<head>
    <!-- Include bootstrap stylesheet -->
    <link type="text/css" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
</head>

<div class="wrapper">
  <div class="input-area">
          <input type="text" id="search" class="searchBox" placeholder="type and press enter"/>
    <div class="buttons">
      <button class="btn btn-warning btn-lg" id="search-button"> <i class="fa fa-search fa-lg "></i> Click to search</button>
      <button class="btn btn-success btn-lg" id="random-article"> <i class="fa fa-random fa-lg "></i> Find a random article</button>
    </div>    
  </div>
  <div class ="wikiEmpty" id="wikiEmpty"> </div>
  
</div>

<div class="wikiData">
</div>


body {
    background-color: rgb(64,67,74) !important;
    overflow-y:scroll;
    overflow-x:hidden; 

}
  
.wrapper {
  position: fixed;
  width: 100%;
  top: 0px;
  z-index:10;
  height: 200px;
}

.input-area {
  
  border-radius:10px;
  position:relative;
  margin:5% auto 10% auto;
  width:450px;
  padding:50px 50px;
  display:table;
  background-color:#fff;
  font-size: 20px;
  text-align: center; 
  border: 2px solid rgb(64,67,74);
}
.shadow, .wikiEntry {
-moz-box-shadow: 0 0 30px 5px #999;
-webkit-box-shadow: 0 0 30px 5px #999;
}

.searchBox {
  
  position:relative;
  margin:2% auto auto auto;
  width:450px;

}
  
  .buttons {
    width:100%;
    height:100%;
    text-align: center;    
    margin:10% auto -20% auto;
}


.wikiEmpty{
    border-radius:10px;
    font-weight:500;
    font-size:3em;
    font-family: Bookman Old Style;
    color: white;
    width:50%;
    height:100%;
    text-align: center;    
    margin: auto auto auto auto;
}


    .wikiEntry{
    width:75%;
    text-align: left;
    height: auto;
    margin: 0% auto 0% auto;
    position: relative;
    background-color: white;
   }

a {
    display: block;      
    font-weight:500;
    font-size:1.75em;
    font-family: Bookman Old Style;
    margin: 0% auto 0% auto;
    cursor: pointer;
    word-wrap: break-word;  
    height: auto;
    padding: 20px 20px;


}
  a.links {
    text-decoration: none;
    color: black;
  }
 a:hover {
 }

.wikiData {
  position: relative;
  margin: 18% auto auto auto;
  z-index: 0;  
}



$(document).ready(function() {
        
  initialize();
  document.getElementById('wikiEmpty').innerHTML = '';
  $("#search").keyup(function(event){
    if(event.keyCode == 13){
      
        $(".wikiEmpty").hide();
        summonJSON();
        return false;
    }
    if (document.getElementById('search').value == '') {
      $(".wikiEntry").hide();
      $(".wikiEmpty").hide();
    }
});  
  
$("#search-button").on("click", function(e) {
        
  $(".wikiEmpty").hide();
  summonJSON();
  
});                           
                           
  
  
  //When the tweet button (id = tweet-quote) is clicked, create a temporary string variable to store the current quote and author
  //and append it to the twitter tweet posting URL so the user can tweet the quote and author in one tweet
  $("#random-article").on("click", function(e) {
    
    window.open("https://en.wikipedia.org/wiki/Special:Random");

  });  
});




  //this function uses ajax to set up a call to the wikipedia api. Because it uses JSONP, the data can be accessed cross-domains, and 
  //the callback function, processJSON which handles the JSON and displays the desired data will be called upon completion
  function summonJSON() {        
    $.ajax({
      url: "http://en.wikipedia.org/w/api.php?action=opensearch&search=" + document.getElementById('search').value + "&format=json",
      dataType: "jsonp",
      jsonpCallback: "processJSON"
    });  
  }


//The function which receives a JSON object from the source, uses its quote and author data, and processes the data to be more
//presentable and to be displayed in HTML
function initialize() {  
      
    
      var numberThem = 1;
      //make 10 divs to hold the JSON results, each div having an "a" href inside
      for (var x = 1; x < 11; x++) {
        
          var div = document.createElement('div');
          document.body.appendChild(div);
          div.className = 'wikiEntry';
          div.id = 'holder' + x.toString();
          //div.parentNode('wikiData');
          
          //create an 'a' to have the href for the wiki link and the description
          var a = document.createElement('a');
          a.className = 'links';
          a.id = 'wikiEntry' + x.toString();
        
          div.appendChild(a);          

      }

      $(".wikiEntry").hide();

  }
  

//The function which receives a JSON object from the source, uses its quote and author data, and processes the data to be more
//presentable and to be displayed in HTML
function processJSON(json) { 
    
    //check if the json from wikimedia has content. If not, the search returned no results
    if(json[2] != '') {
      
      //update the search title with the new searched word
      //document.getElementById('wikiSearch').innerHTML = 'Search results for <br>"' + document.getElementById('search').value + '"';    
      //$("#wikiSearch").show();
  
      var numberThem = 1;  
      //cycle through the new json from wikimedia
      for (var i in json[2]) {
        if (json[2].hasOwnProperty(i)) {
            if(json[2][i].toString() != '') {

            //update the values of the previously created divs to reflect the current search
            //document.getElementById('wikiEntry' + numberThem.toString()).innerHTML = ''; 
            document.getElementById('wikiEntry' + numberThem.toString()).innerHTML = numberThem.toString() + '.  ' + json[2][i].toString(); 
            document.getElementById('wikiEntry' + numberThem.toString()).href = "" + json[3][i].toString() + "";    

            $("#holder" + numberThem.toString()).show();

          }
          
          else {
            var hider = numberThem;
            for (hider; hider<11;hider++) {
                            
               $("#holder" + hider.toString()).hide();  

            }
            numberThem--;
          }        
          numberThem++;
        }
       }  
       //alert(numberThem);
       document.getElementById('holder' + (numberThem-1).toString()).style.marginBottom = "60px";
      
      
    }
    //the json has no content, so the search returned no results
    else{
        document.getElementById('wikiEmpty').innerHTML = 'Search returned no results.';    
        $(".wikiEntry").hide();
        $("#wikiEmpty").show();
        return;

      }
  
}
